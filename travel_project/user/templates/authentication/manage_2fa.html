{% extends 'base.html' %}
{% load static %}
{% load widget_tweaks %}

{% block title %}Управление двухэтапной аутентификацией{% endblock %}

{% block content %}
<!-- Start 2FA Section -->
<section class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-6 col-md-8 text-center">
            <h2 class="mb-4 fw-bold">Двухэтапная аутентификация</h2>

            <form method="post" class="d-grid gap-3">
                {% csrf_token %}
                {% if user.is_2fa_enabled %}
                    <button type="submit" class="btn btn-danger btn-lg">Выключить 2FA</button>
                    <p class="mt-3 text-success">2FA сейчас <strong>включена</strong>.</p>
                {% else %}
                    <button type="submit" class="btn btn-primary btn-lg">Включить 2FA</button>
                    <p class="mt-3 text-muted">2FA сейчас <strong>выключена</strong>.</p>
                {% endif %}
            </form>

            {% if messages %}
                <div class="mt-4">
                    {% for message in messages %}
                        <div class="alert alert-{{ message.tags }} mt-2" role="alert">{{ message }}</div>
                    {% endfor %}
                </div>
            {% endif %}
        </div>
    </div>
</section>
<!-- End 2FA Section -->
{% endblock %}
